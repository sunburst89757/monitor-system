{"version":3,"file":"monitor.cjs.js","sources":["../src/utils/xhr.js","../src/utils/utils.js","../src/utils/cache.js","../src/utils/generateUniqueID.js","../src/config.js","../src/utils/handleXhr.js","../src/utils/report.js","../src/error/index.js","../src/performance/utils.js","../src/performance/observeEntries.js","../src/performance/observePaint.js","../src/performance/observeLCP.js","../src/performance/observeCLS.js","../src/performance/observeFID.js","../src/performance/observerLoad.js","../src/performance/observeFirstScreenPaint.js","../src/performance/xhr.js","../src/performance/fetch.js","../src/performance/fps.js","../src/performance/onVueRouter.js","../src/performance/index.js","../src/behavior/utils.js","../src/behavior/pv.js","../src/behavior/pageAccessDuration.js","../src/behavior/pageAccessHeight.js","../src/behavior/onClick.js","../src/behavior/onVueRouter.js","../src/behavior/pageChange.js","../src/behavior/index.js","../src/index.js"],"sourcesContent":["export const originalProto = XMLHttpRequest.prototype\nexport const originalOpen = originalProto.open\nexport const originalSend = originalProto.send","export function deepCopy(target) {\n    if (typeof target === 'object') {\n        const result = Array.isArray(target) ? [] : {}\n        for (const key in target) {\n            if (typeof target[key] == 'object') {\n                result[key] = deepCopy(target[key])\n            } else {\n                result[key] = target[key]\n            }\n        }\n\n        return result\n    }\n\n    return target\n}\n\nexport function onBFCacheRestore(callback) {\n    window.addEventListener('pageshow', event => {\n        if (event.persisted) {\n            callback(event)\n        }\n    }, true)\n}\n\nexport function onBeforeunload(callback) {\n    window.addEventListener('beforeunload', callback, true)\n}\n\nexport function onHidden(callback, once) {\n    const onHiddenOrPageHide = (event) => {\n        if (event.type === 'pagehide' || document.visibilityState === 'hidden') {\n            callback(event)\n            if (once) {\n                window.removeEventListener('visibilitychange', onHiddenOrPageHide, true)\n                window.removeEventListener('pagehide', onHiddenOrPageHide, true)\n            }\n        }\n    }\n\n    window.addEventListener('visibilitychange', onHiddenOrPageHide, true)\n    window.addEventListener('pagehide', onHiddenOrPageHide, true)\n}\n\nexport function executeAfterLoad(callback) {\n    if (document.readyState === 'complete') {\n        callback()\n    } else {\n        const onLoad = () => {\n            callback()\n            window.removeEventListener('load', onLoad, true)\n        }\n\n        window.addEventListener('load', onLoad, true)\n    }\n}\n\nexport function getPageURL() {\n    return window.location.href \n}","import { deepCopy } from './utils'\n\nconst cache = []\n\nexport function getCache() {\n    return deepCopy(cache)\n}\n\nexport function addCache(data) {\n    cache.push(data)\n}\n\nexport function clearCache() {\n    cache.length = 0\n}\n","export default function generateUniqueID() {\n    return `v2-${Date.now()}-${Math.floor(Math.random() * (9e12 - 1)) + 1e12}`\n}","const config = {\n  // 上报地址\n  url: \"\",\n  // 项目id 支持H5 Web 小程序\n  appID: \"\",\n  // 登录用户的id\n  userID: \"\",\n  systemInfo: window.navigator.userAgent,\n  vue: {\n    Vue: null,\n    router: null\n  }\n};\n\nexport default config;\n\nexport function setConfig(options) {\n  for (const key in config) {\n    if (options[key]) {\n      config[key] = options[key];\n    }\n  }\n}\n","export const urlToJson = (url = window.location.href) => {\r\n  // 箭头函数默认传值为当前页面url\r\n  let obj = {},\r\n    index = url.indexOf(\"?\"), // 看url有没有参数\r\n    params = url.substring(index + 1); // 截取url参数部分 id = 1 & type = 2\r\n\r\n  if (index != -1) {\r\n    // 有参数时\r\n    let parr = params.split(\"&\"); // 将参数分割成数组 [\"id = 1 \", \" type = 2\"]\r\n    for (let i of parr) {\r\n      // 遍历数组\r\n      let arr = i.split(\"=\"); // 1） i id = 1   arr = [id, 1]  2）i type = 2  arr = [type, 2]\r\n      obj[arr[0]] = arr[1]; // obj[arr[0]] = id, obj.id = 1   obj[arr[0]] = type, obj.type = 2\r\n    }\r\n  }\r\n\r\n  return obj;\r\n};\r\nexport const handleXhr = (arr) => {\r\n  const targetArr = arr.filter((item) => !!item.method);\r\n  targetArr.forEach((item) => {\r\n    if (item.method === \"GET\" && item.subType === \"xhr\") {\r\n      item.sendData = urlToJson(item.url);\r\n    }\r\n  });\r\n  const realArr = arr.filter((item) => !item.method);\r\n  return [...realArr, ...targetArr];\r\n};\r\n","import { originalOpen, originalSend } from \"./xhr\";\nimport { addCache, getCache, clearCache } from \"./cache\";\nimport generateUniqueID from \"../utils/generateUniqueID\";\nimport config from \"../config\";\nimport { handleXhr } from \"./handleXhr\";\nexport function isSupportSendBeacon() {\n  return !!window.navigator?.sendBeacon;\n}\n\nconst sendBeacon = isSupportSendBeacon()\n  ? window.navigator.sendBeacon.bind(window.navigator)\n  : reportWithXHR;\n\nconst sessionID = generateUniqueID();\nexport function report(data, isImmediate = false) {\n  if (!config.url) {\n    console.error(\"请设置上传 url 地址\");\n  }\n\n  const reportData = JSON.stringify({\n    id: sessionID,\n    appID: config.appID,\n    userID: config.userID,\n    data\n  });\n\n  if (isImmediate) {\n    sendBeacon(config.url, reportData);\n    return;\n  }\n\n  if (window.requestIdleCallback) {\n    window.requestIdleCallback(\n      () => {\n        sendBeacon(config.url, reportData);\n      },\n      { timeout: 3000 }\n    );\n  } else {\n    setTimeout(() => {\n      sendBeacon(config.url, reportData);\n    });\n  }\n}\n\nlet timer = null;\nexport function lazyReportCache(data, timeout = 3000) {\n  addCache(data);\n\n  clearTimeout(timer);\n  timer = setTimeout(() => {\n    const data = getCache();\n    if (data.length) {\n      report(handleXhr(data));\n      clearCache();\n    }\n  }, timeout);\n}\n\nexport function reportWithXHR(data) {\n  const xhr = new XMLHttpRequest();\n  originalOpen.call(xhr, \"post\", config.url);\n  originalSend.call(xhr, JSON.stringify(data));\n}\n","import { lazyReportCache } from \"../utils/report\";\nimport { onBFCacheRestore, getPageURL } from \"../utils/utils\";\nimport config from \"../config\";\n\nexport default function error() {\n  const oldConsoleError = window.console.error;\n  window.console.error = (...args) => {\n    oldConsoleError.apply(this, args);\n    lazyReportCache({\n      type: \"error\",\n      subType: \"console-error\",\n      startTime: performance.now(),\n      errData: args,\n      pageURL: getPageURL()\n    });\n  };\n\n  // 捕获资源加载失败错误 js css img...\n  window.addEventListener(\n    \"error\",\n    (e) => {\n      const target = e.target;\n      if (!target) return;\n\n      if (target.src || target.href) {\n        const url = target.src || target.href;\n        lazyReportCache({\n          url,\n          type: \"error\",\n          subType: \"resource\",\n          startTime: e.timeStamp,\n          html: target.outerHTML,\n          resourceType: target.tagName,\n          paths: e.path.map((item) => item.tagName).filter(Boolean),\n          pageURL: getPageURL()\n        });\n      }\n    },\n    true\n  );\n\n  // 监听 js 错误\n  window.onerror = (msg, url, line, column, error) => {\n    lazyReportCache({\n      msg,\n      line,\n      column,\n      error: error.stack,\n      subType: \"js\",\n      pageURL: url,\n      type: \"error\",\n      startTime: performance.now()\n    });\n  };\n\n  // 监听 promise 错误 缺点是获取不到列数据\n  window.addEventListener(\"unhandledrejection\", (e) => {\n    lazyReportCache({\n      reason: e.reason?.stack,\n      subType: \"promise\",\n      msg: e.reason.name + \":\" + e.reason.message,\n      type: \"error\",\n      startTime: e.timeStamp,\n      pageURL: getPageURL()\n    });\n  });\n\n  if (config.vue?.Vue) {\n    config.vue.Vue.config.errorHandler = (err, vm, info) => {\n      console.error(err);\n\n      lazyReportCache({\n        info,\n        error: err.stack,\n        subType: \"vue\",\n        type: \"error\",\n        startTime: performance.now(),\n        pageURL: getPageURL()\n      });\n    };\n  }\n\n  onBFCacheRestore(() => {\n    error();\n  });\n}\n","export function isSupportPerformanceObserver() {\n  return !!window.PerformanceObserver;\n}\n","import { isSupportPerformanceObserver } from \"./utils\";\nimport { executeAfterLoad, getPageURL } from \"../utils/utils\";\nimport { lazyReportCache } from \"../utils/report\";\n\nexport default function observeEntries() {\n  executeAfterLoad(() => {\n    observeEvent(\"resource\");\n    observeEvent(\"navigation\");\n  });\n}\n\nlet hasAlreadyCollected = false;\nexport function observeEvent(entryType) {\n  function entryHandler(list) {\n    const data = list.getEntries ? list.getEntries() : list;\n    for (const entry of data) {\n      if (entryType === \"navigation\") {\n        if (hasAlreadyCollected) return;\n\n        if (observer) {\n          observer.disconnect();\n        }\n\n        hasAlreadyCollected = true;\n      }\n      // nextHopProtocol 属性为空，说明资源解析错误或者跨域\n      // beacon 用于上报数据，所以不统计。xhr fetch 单独统计\n      if (\n        (!entry.nextHopProtocol && entryType !== \"navigation\") ||\n        filter(entry.initiatorType)\n      ) {\n        return;\n      }\n\n      lazyReportCache({\n        name: entry.name, // 资源名称\n        subType: entryType,\n        type: \"performance\",\n        sourceType: entry.initiatorType, // 资源类型\n        duration: entry.duration, // 资源加载耗时\n        dns: entry.domainLookupEnd - entry.domainLookupStart, // DNS 耗时\n        tcp: entry.connectEnd - entry.connectStart, // 建立 tcp 连接耗时\n        redirect: entry.redirectEnd - entry.redirectStart, // 重定向耗时\n        ttfb: entry.responseStart, // 首字节时间\n        protocol: entry.nextHopProtocol, // 请求协议\n        responseBodySize: entry.encodedBodySize, // 响应内容大小\n        responseHeaderSize: entry.transferSize - entry.encodedBodySize, // 响应头部大小\n        resourceSize: entry.decodedBodySize, // 资源解压后的大小\n        isCache: isCache(entry), // 是否命中缓存\n        startTime: performance.now(),\n        pageURL: getPageURL()\n      });\n    }\n  }\n\n  let observer;\n  if (isSupportPerformanceObserver()) {\n    observer = new PerformanceObserver(entryHandler);\n    observer.observe({ type: entryType, buffered: true });\n  } else {\n    const data = window.performance.getEntriesByType(entryType);\n    entryHandler(data);\n  }\n}\n\n// 不统计以下类型的资源\nconst preventType = [\"fetch\", \"xmlhttprequest\", \"beacon\"];\nconst isSafari =\n  /Safari/.test(navigator.userAgent) && !/Chrome/.test(navigator.userAgent);\nif (isSafari) {\n  // safari 会把接口请求当成 other\n  preventType.push(\"other\");\n}\n\nfunction filter(type) {\n  return preventType.includes(type);\n}\n\nfunction isCache(entry) {\n  // 直接从缓存读取或 304\n  return (\n    entry.transferSize === 0 ||\n    (entry.transferSize !== 0 && entry.encodedBodySize === 0)\n  );\n}\n","import { isSupportPerformanceObserver } from './utils'\nimport { onBFCacheRestore, getPageURL } from '../utils/utils'\nimport { lazyReportCache } from '../utils/report'\n\nexport default function observePaint() {\n    if (!isSupportPerformanceObserver()) return\n    \n    const entryHandler = (list) => {        \n        for (const entry of list.getEntries()) {\n            if (entry.name === 'first-contentful-paint') {\n                observer.disconnect()\n            }\n    \n            const json = entry.toJSON()\n            delete json.duration\n    \n            const reportData = {\n                ...json,\n                subType: entry.name,\n                type: 'performance',\n                pageURL: getPageURL(),\n            }\n\n            lazyReportCache(reportData)\n        }\n    }\n    \n    const observer = new PerformanceObserver(entryHandler)\n    observer.observe({ type: 'paint', buffered: true })\n\n    onBFCacheRestore(event => {\n        requestAnimationFrame(() => {\n            ['first-paint', 'first-contentful-paint'].forEach(type => {\n                lazyReportCache({\n                    startTime: performance.now() - event.timeStamp,\n                    name: type,\n                    subType: type,\n                    type: 'performance',\n                    pageURL: getPageURL(),\n                    bfc: true,\n                })\n            })\n        })\n    })\n}","import { isSupportPerformanceObserver } from './utils'\nimport { onBFCacheRestore, getPageURL } from '../utils/utils'\nimport { lazyReportCache } from '../utils/report'\n\nlet lcpDone = false\nexport function isLCPDone() {\n    return lcpDone\n}\n\nexport default function observeLCP() {\n    if (!isSupportPerformanceObserver()) {\n        lcpDone = true\n        return\n    }\n    \n    const entryHandler = (list) => {\n        lcpDone = true\n\n        if (observer) {\n            observer.disconnect()\n        }\n        \n        for (const entry of list.getEntries()) {\n            const json = entry.toJSON()\n            delete json.duration\n\n            const reportData = {\n                ...json,\n                target: entry.element?.tagName,\n                name: entry.entryType,\n                subType: entry.entryType,\n                type: 'performance',\n                pageURL: getPageURL(),\n            }\n            \n            lazyReportCache(reportData)\n        }\n    }\n\n    const observer = new PerformanceObserver(entryHandler)\n    observer.observe({ type: 'largest-contentful-paint', buffered: true })\n\n    onBFCacheRestore(event => {\n        requestAnimationFrame(() => {\n            lazyReportCache({\n                startTime: performance.now() - event.timeStamp,\n                name: 'largest-contentful-paint',\n                subType: 'largest-contentful-paint',\n                type: 'performance',\n                pageURL: getPageURL(),\n                bfc: true,\n            })\n        })\n    })\n}","import { isSupportPerformanceObserver } from './utils'\nimport { onBFCacheRestore, deepCopy, getPageURL, onHidden } from '../utils/utils'\nimport { lazyReportCache } from '../utils/report'\n\nexport default function observeCLS() {\n    if (!isSupportPerformanceObserver()) return\n\n    onBFCacheRestore(() => {\n        observeCLS()\n    })\n\n    let sessionValue = 0\n    let sessionEntries = []\n    const cls = {\n        subType: 'layout-shift',\n        name: 'layout-shift',\n        type: 'performance',\n        pageURL: getPageURL(),\n        value: 0,\n    }\n\n    const entryHandler = (list) => {\n        for (const entry of list.getEntries()) {\n            // Only count layout shifts without recent user input.\n            if (!entry.hadRecentInput) {\n                const firstSessionEntry = sessionEntries[0]\n                const lastSessionEntry = sessionEntries[sessionEntries.length - 1]\n            \n                // If the entry occurred less than 1 second after the previous entry and\n                // less than 5 seconds after the first entry in the session, include the\n                // entry in the current session. Otherwise, start a new session.\n                if (\n                    sessionValue\n                    && entry.startTime - lastSessionEntry.startTime < 1000\n                    && entry.startTime - firstSessionEntry.startTime < 5000\n                ) {\n                    sessionValue += entry.value\n                    sessionEntries.push(formatCLSEntry(entry))\n                } else {\n                    sessionValue = entry.value\n                    sessionEntries = [formatCLSEntry(entry)]\n                }\n            \n                // If the current session value is larger than the current CLS value,\n                // update CLS and the entries contributing to it.\n                if (sessionValue > cls.value) {\n                    cls.value = sessionValue\n                    cls.entries = sessionEntries\n                    cls.startTime = performance.now()\n                    lazyReportCache(deepCopy(cls))\n                }\n            }\n        }\n    }\n\n    const observer = new PerformanceObserver(entryHandler)\n    observer.observe({ type: 'layout-shift', buffered: true })\n\n    if (observer) {\n        onHidden(() => {\n            observer.takeRecords().map(entryHandler)\n        })\n    }\n}\n\nfunction formatCLSEntry(entry) {\n    const result = entry.toJSON()\n    delete result.duration\n    delete result.sources\n    \n    return result\n}","import { isSupportPerformanceObserver } from './utils'\nimport { onBFCacheRestore, getPageURL } from '../utils/utils'\nimport { lazyReportCache } from '../utils/report'\n\nexport default function observeFID() {\n    onBFCacheRestore(() => {\n        observeFID()\n    })\n    \n    if (!isSupportPerformanceObserver()) {\n        const entryHandler = (list) => {\n            if (observer) {\n                observer.disconnect()\n            }\n            \n            for (const entry of list.getEntries()) {\n                const json = entry.toJSON()\n                json.nodeName = entry.tagName\n                json.event = json.name\n                json.name = json.entryType\n                json.type = 'performance'\n                json.pageURL = getPageURL()\n                delete json.cancelable\n\n                lazyReportCache(json)\n            }\n        }\n    \n        const observer = new PerformanceObserver(entryHandler)\n        observer.observe({ type: 'first-input', buffered: true })\n        return\n    }\n\n    fidPolyfill()\n}\n\nfunction fidPolyfill() {\n    eachEventType(window.addEventListener)\n}\n\nfunction onInput(event) {\n    // Only count cancelable events, which should trigger behavior\n    // important to the user.\n    if (event.cancelable) {\n        // In some browsers `event.timeStamp` returns a `DOMTimeStamp` value\n        // (epoch time) instead of the newer `DOMHighResTimeStamp`\n        // (document-origin time). To check for that we assume any timestamp\n        // greater than 1 trillion is a `DOMTimeStamp`, and compare it using\n        // the `Date` object rather than `performance.now()`.\n        // - https://github.com/GoogleChromeLabs/first-input-delay/issues/4\n        const isEpochTime = event.timeStamp > 1e12\n        const now = isEpochTime ? Date.now() : performance.now()\n  \n        // Input delay is the delta between when the system received the event\n        // (e.g. event.timeStamp) and when it could run the callback (e.g. `now`).\n        const duration = now - event.timeStamp\n\n        lazyReportCache({\n            duration,\n            subType: 'first-input',\n            event: event.type,\n            name: 'first-input',\n            target: event.target.tagName,\n            startTime: event.timeStamp,\n            type: 'performance',\n            pageURL: getPageURL(),\n        })\n\n        eachEventType(window.removeEventListener)\n    }\n}\n\nfunction eachEventType(callback) {\n    const eventTypes = [\n        'mousedown',\n        'keydown',\n        'touchstart',\n    ]\n    \n    eventTypes.forEach((type) => callback(type, onInput, { passive: true, capture: true }))\n}","import { lazyReportCache } from \"../utils/report\";\nimport { onBFCacheRestore, getPageURL } from \"../utils/utils\";\n\nexport default function observerLoad() {\n  [\"load\", \"DOMContentLoaded\"].forEach((type) => onEvent(type));\n\n  onBFCacheRestore((event) => {\n    requestAnimationFrame(() => {\n      [\"load\", \"DOMContentLoaded\"].forEach((type) => {\n        lazyReportCache({\n          startTime: performance.now() - event.timeStamp,\n          subType: type.toLocaleLowerCase(),\n          type: \"performance\",\n          pageURL: getPageURL(),\n          bfc: true\n        });\n      });\n    });\n  });\n}\n\nfunction onEvent(type) {\n  function callback() {\n    lazyReportCache({\n      type: \"performance\",\n      subType: type.toLocaleLowerCase(),\n      startTime: performance.now(),\n      pageURL: getPageURL()\n    });\n\n    window.removeEventListener(type, callback, true);\n  }\n\n  window.addEventListener(type, callback, true);\n}\n","import { executeAfterLoad, onBFCacheRestore, getPageURL } from '../utils/utils'\nimport { isLCPDone } from './observeLCP'\nimport { lazyReportCache } from '../utils/report'\n\nlet isOnLoaded = false\nexecuteAfterLoad(() => {\n    isOnLoaded = true\n})\n\nlet timer\nlet observer\nfunction checkDOMChange() {\n    clearTimeout(timer)\n    timer = setTimeout(() => {\n        // 等 load、lcp 事件触发后并且 DOM 树不再变化时，计算首屏渲染时间\n        if (isOnLoaded && isLCPDone()) {\n            observer && observer.disconnect()\n            lazyReportCache({\n                type: 'performance',\n                subType: 'first-screen-paint',\n                startTime: getRenderTime(),\n                pageURL: getPageURL(),\n            })\n\n            entries = null\n        } else {\n            checkDOMChange()\n        }\n    }, 500)\n}\n\nlet entries = []\nexport default function observeFirstScreenPaint() {\n    if (!MutationObserver) return\n\n    const next = window.requestAnimationFrame ? requestAnimationFrame : setTimeout\n    const ignoreDOMList = ['STYLE', 'SCRIPT', 'LINK', 'META']\n    observer = new MutationObserver(mutationList => {\n        checkDOMChange()\n        const entry = {\n            startTime: 0,\n            children: [],\n        }\n        \n        next(() => {\n            entry.startTime = performance.now()\n        })\n\n        for (const mutation of mutationList) {\n            if (mutation.addedNodes.length) {\n                for (const node of Array.from(mutation.addedNodes)) {\n                    if (\n                        node.nodeType === 1 \n                        && !ignoreDOMList.includes(node.tagName)\n                        && !isInclude(node, entry.children)\n                    ) {\n                        entry.children.push(node)\n                    }\n                }\n            }\n        }\n\n        if (entry.children.length) {\n            entries.push(entry)\n        }\n    })\n\n    observer.observe(document, {\n        childList: true,\n        subtree: true,\n    })\n\n    onBFCacheRestore(event => {\n        requestAnimationFrame(() => {\n            lazyReportCache({\n                startTime: performance.now() - event.timeStamp,\n                type: 'performance',\n                subType: 'first-screen-paint',\n                bfc: true,\n                pageURL: getPageURL(),\n            })\n        })\n    })\n}\n\nfunction getRenderTime() {\n    let startTime = 0\n    entries.forEach(entry => {\n        for (const node of entry.children) {\n            if (isInScreen(node) && entry.startTime > startTime && needToCalculate(node)) {\n                startTime = entry.startTime\n                break\n            }\n        }\n    })\n\n    // 需要和当前页面所有加载图片的时间做对比，取最大值\n    // 图片请求时间要小于 startTime，响应结束时间要大于 startTime\n    performance.getEntriesByType('resource').forEach(item => {\n        if (\n            item.initiatorType === 'img'\n            && item.fetchStart < startTime \n            && item.responseEnd > startTime\n        ) {\n            startTime = item.responseEnd\n        }\n    })\n    \n    return startTime\n}\n\nfunction needToCalculate(node) {\n    // 隐藏的元素不用计算\n    if (window.getComputedStyle(node).display === 'none') return false\n    \n    // 用于统计的图片不用计算\n    if (node.tagName === 'IMG' && node.width < 2 && node.height < 2) {\n        return false\n    }\n    \n    return true\n}\n\nfunction isInclude(node, arr) {\n    if (!node || node === document.documentElement) {\n        return false\n    }\n    \n    if (arr.includes(node)) {\n        return true\n    }\n\n    return isInclude(node.parentElement, arr)\n}\n\nconst viewportWidth = window.innerWidth\nconst viewportHeight = window.innerHeight\n\n// dom 对象是否在屏幕内\nfunction isInScreen(dom) {\n    const rectInfo = dom.getBoundingClientRect()\n    if (\n        rectInfo.left >= 0 \n        && rectInfo.left < viewportWidth\n        && rectInfo.top >= 0\n        && rectInfo.top < viewportHeight\n    ) {\n        return true\n    }\n}","import { originalOpen, originalSend, originalProto } from \"../utils/xhr\";\nimport { lazyReportCache } from \"../utils/report\";\nimport { getPageURL } from \"../utils/utils\";\n\nfunction overwriteOpenAndSend() {\n  originalProto.open = function newOpen(...args) {\n    this.url = args[1];\n    this.method = args[0];\n    originalOpen.apply(this, args);\n  };\n\n  originalProto.send = function newSend(...args) {\n    this.startTime = Date.now();\n    this.sendData = args[0];\n    const onLoadend = (...args) => {\n      this.endTime = Date.now();\n      this.duration = this.endTime - this.startTime;\n      const responseData = args[0].currentTarget.response;\n      const { status, duration, startTime, endTime, url, method, sendData } =\n        this;\n      const reportData = {\n        status,\n        duration,\n        startTime,\n        endTime,\n        url,\n        sendData,\n        responseData,\n        method: (method || \"GET\").toUpperCase(),\n        success: status >= 200 && status < 300,\n        subType: \"xhr\",\n        type: \"performance\",\n        pageURL: getPageURL()\n      };\n\n      lazyReportCache(reportData);\n\n      this.removeEventListener(\"loadend\", onLoadend, true);\n    };\n\n    this.addEventListener(\"loadend\", onLoadend, true);\n    originalSend.apply(this, args);\n  };\n}\n\nexport default function xhr() {\n  overwriteOpenAndSend();\n}\n","import { urlToJson } from \"../utils/handleXhr\";\nimport { lazyReportCache } from \"../utils/report\";\nimport { getPageURL } from \"../utils/utils\";\n\nconst originalFetch = window.fetch;\n\nfunction overwriteFetch() {\n  window.fetch = function newFetch(url, config) {\n    const startTime = Date.now();\n    const reportData = {\n      startTime,\n      url,\n      method: (config?.method || \"GET\").toUpperCase(),\n      subType: \"fetch\",\n      type: \"performance\",\n      pageURL: getPageURL()\n    };\n\n    return originalFetch(url, config)\n      .then(async (res) => {\n        const data = res.clone();\n        const responseData = await data.json();\n        reportData.endTime = Date.now();\n        reportData.duration = reportData.endTime - reportData.startTime;\n        reportData.sendData = config ? config.body : urlToJson(reportData.url);\n        reportData.responseData = responseData;\n        reportData.status = data.status;\n        reportData.success = data.ok;\n        lazyReportCache(reportData);\n\n        return res;\n      })\n      .catch((err) => {\n        reportData.endTime = Date.now();\n        reportData.duration = reportData.endTime - reportData.startTime;\n        reportData.status = 0;\n        reportData.success = false;\n        reportData.sendData = config ? config.body : urlToJson(reportData.url);\n        // reportData.responseData = JSON.stringify(err);\n        // console.log(err, \"shishenme \");\n        lazyReportCache(reportData);\n\n        throw err;\n      });\n  };\n}\n\nexport default function fetch() {\n  overwriteFetch();\n}\n","import { report } from \"../utils/report\";\nimport { deepCopy, getPageURL } from \"../utils/utils\";\n\nconst next = window.requestAnimationFrame\n  ? requestAnimationFrame\n  : (callback) => {\n      setTimeout(callback, 1000 / 60);\n    };\n\nconst frames = [];\n\nexport default function fps() {\n  let frame = 0;\n  let lastSecond = Date.now();\n\n  function calculateFPS() {\n    frame++;\n    const now = Date.now();\n    if (lastSecond + 1000 <= now) {\n      // 由于 now - lastSecond 的单位是毫秒，所以 frame 要 * 1000\n      const fps = Math.round((frame * 1000) / (now - lastSecond));\n      frames.push(fps);\n\n      frame = 0;\n      lastSecond = now;\n    }\n\n    // 避免上报太快，缓存一定数量再上报\n    if (frames.length >= 60) {\n      report(\n        deepCopy({\n          frames,\n          type: \"performace\",\n          subType: \"fps\",\n          pageURL: getPageURL()\n        })\n      );\n\n      frames.length = 0;\n    }\n\n    next(calculateFPS);\n  }\n\n  calculateFPS();\n}\n\nexport function isBlocking(fpsList, below = 20, last = 3) {\n  let count = 0;\n  for (let i = 0; i < fpsList.length; i++) {\n    if (fpsList[i] && fpsList[i] < below) {\n      count++;\n    } else {\n      count = 0;\n    }\n\n    if (count >= last) {\n      return true;\n    }\n  }\n\n  return false;\n}\n","import { lazyReportCache } from '../utils/report'\nimport { getPageURL } from '../utils/utils'\n\nexport default function onVueRouter(Vue, router) {\n    let isFirst = true\n    let startTime\n    router.beforeEach((to, from, next) => {\n        // 首次进入页面已经有其他统计的渲染时间可用\n        if (isFirst) {\n            isFirst = false\n            return next()\n        }\n\n        // 给 router 新增一个字段，表示是否要计算渲染时间\n        // 只有路由跳转才需要计算\n        router.needCalculateRenderTime = true\n        startTime = performance.now()\n\n        next()\n    })\n\n    let timer\n    Vue.mixin({\n        mounted() {\n            if (!router.needCalculateRenderTime) return\n\n            this.$nextTick(() => {\n                // 仅在整个视图都被渲染之后才会运行的代码\n                const now = performance.now()\n                clearTimeout(timer)\n\n                timer = setTimeout(() => {\n                    router.needCalculateRenderTime = false\n                    lazyReportCache({\n                        type: 'performance',\n                        subType: 'vue-router-change-paint',\n                        duration: now - startTime,\n                        startTime: now,\n                        pageURL: getPageURL(),\n                    })\n                }, 1000)\n            })\n        },\n    })\n}","import observeEntries from \"./observeEntries\";\nimport observePaint from \"./observePaint\";\nimport observeLCP from \"./observeLCP\";\nimport observeCLS from \"./observeCLS\";\nimport observeFID from \"./observeFID\";\nimport observerLoad from \"./observerLoad\";\nimport observeFirstScreenPaint from \"./observeFirstScreenPaint\";\nimport xhr from \"./xhr\";\nimport fetch from \"./fetch\";\nimport fps from \"./fps\";\nimport onVueRouter from \"./onVueRouter\";\nimport config from \"../config\";\n\nexport default function performance() {\n  observeEntries();\n  // FCP 和 FP监视\n  observePaint();\n  // 加载\n  observeLCP();\n  // 视觉稳定性\n  observeCLS();\n  // 交互\n  observeFID();\n  xhr();\n  fetch();\n  fps();\n  observerLoad();\n  observeFirstScreenPaint();\n\n  if (config.vue?.Vue && config.vue?.router) {\n    onVueRouter(config.vue.Vue, config.vue.router);\n  }\n}\n","import generateUniqueID from '../utils/generateUniqueID'\n\nlet uuid = ''\nexport function getUUID() {\n    if (uuid) return uuid\n\n    // 如果是手机 APP，可以调用原生方法或者设备唯一标识当成 uuid\n    uuid = localStorage.getItem('uuid')\n    if (uuid) return uuid\n\n    uuid = generateUniqueID()\n    localStorage.setItem('uuid', uuid)\n    return uuid\n}","import { lazyReportCache } from '../utils/report'\nimport { getUUID } from './utils'\nimport { getPageURL } from '../utils/utils'\n\nexport default function pv() {\n    lazyReportCache({\n        type: 'behavior',\n        subType: 'pv',\n        startTime: performance.now(),\n        pageURL: getPageURL(),\n        referrer: document.referrer,\n        uuid: getUUID(),\n    })\n}","import { report } from '../utils/report'\nimport { onBeforeunload, getPageURL } from '../utils/utils'\nimport { getUUID } from './utils'\n\nexport default function pageAccessDuration() {\n    onBeforeunload(() => {\n        report({\n            type: 'behavior',\n            subType: 'page-access-duration',\n            startTime: performance.now(),\n            pageURL: getPageURL(),\n            uuid: getUUID(),\n        }, true)\n    })\n}","import { lazyReportCache, report } from '../utils/report'\nimport { getUUID } from './utils'\nimport { onBeforeunload, executeAfterLoad, getPageURL } from '../utils/utils'\n\nlet timer\nlet startTime = 0\nlet hasReport = false\nlet pageHeight = 0\nlet scrollTop = 0\nlet viewportHeight = 0\n\nexport default function pageAccessHeight() {\n    window.addEventListener('scroll', onScroll)\n\n    onBeforeunload(() => {\n        const now = performance.now()\n        report({\n            startTime: now,\n            duration: now - startTime,\n            type: 'behavior',\n            subType: 'page-access-height',\n            pageURL: getPageURL(),\n            value: toPercent((scrollTop + viewportHeight) / pageHeight),\n            uuid: getUUID(),\n        }, true)\n    })\n\n    // 页面加载完成后初始化记录当前访问高度、时间\n    executeAfterLoad(() => {\n        startTime = performance.now()\n        pageHeight = document.documentElement.scrollHeight || document.body.scrollHeight\n        scrollTop = document.documentElement.scrollTop || document.body.scrollTop\n        viewportHeight = window.innerHeight\n    })\n}\n\nfunction onScroll() {\n    clearTimeout(timer)\n    const now = performance.now()\n    \n    if (!hasReport) {\n        hasReport = true\n        lazyReportCache({\n            startTime: now,\n            duration: now - startTime,\n            type: 'behavior',\n            subType: 'page-access-height',\n            pageURL: getPageURL(),\n            value: toPercent((scrollTop + viewportHeight) / pageHeight),\n            uuid: getUUID(),\n        })\n    }\n\n    timer = setTimeout(() => {\n        hasReport = false\n        startTime = now\n        pageHeight = document.documentElement.scrollHeight || document.body.scrollHeight\n        scrollTop = document.documentElement.scrollTop || document.body.scrollTop\n        viewportHeight = window.innerHeight        \n    }, 500)\n}\n\nfunction toPercent(val) {\n    if (val >= 1) return '100%'\n    return (val * 100).toFixed(2) + '%'\n}","import { lazyReportCache } from '../utils/report'\nimport { getPageURL } from '../utils/utils'\nimport { getUUID } from './utils'\n\nexport default function onClick() {\n    ['mousedown', 'touchstart'].forEach(eventType => {\n        let timer\n        window.addEventListener(eventType, event => {\n            clearTimeout(timer)\n            timer = setTimeout(() => {\n                const target = event.target\n                const { top, left } = target.getBoundingClientRect()\n                \n                lazyReportCache({\n                    top,\n                    left,\n                    eventType,\n                    pageHeight: document.documentElement.scrollHeight || document.body.scrollHeight,\n                    scrollTop: document.documentElement.scrollTop || document.body.scrollTop,\n                    type: 'behavior',\n                    subType: 'click',\n                    target: target.tagName,\n                    paths: event.path?.map(item => item.tagName).filter(Boolean),\n                    startTime: event.timeStamp,\n                    pageURL: getPageURL(),\n                    outerHTML: target.outerHTML,\n                    innerHTML: target.innerHTML,\n                    width: target.offsetWidth,\n                    height: target.offsetHeight,\n                    viewport: {\n                        width: window.innerWidth,\n                        height: window.innerHeight,\n                    },\n                    uuid: getUUID(),\n                })\n            }, 500)\n        })\n    })\n}","import { lazyReportCache } from \"../utils/report\";\nimport { getUUID } from \"./utils\";\n\nexport default function onVueRouter(router) {\n  router.beforeEach((to, from, next) => {\n    // 首次加载页面不用统计\n    if (!from.name) {\n      return next();\n    }\n\n    const data = {\n      params: to.params,\n      query: to.query\n    };\n\n    lazyReportCache({\n      data,\n      name: to.name || to.path,\n      type: \"behavior\",\n      subType: \"vue-router-change\",\n      startTime: performance.now(),\n      from: from.fullPath,\n      to: to.fullPath,\n      pageURL: to.fullPath,\n      uuid: getUUID()\n    });\n    lazyReportCache({\n      type: \"behavior\",\n      subType: \"pv\",\n      startTime: performance.now(),\n      referrer: from.fullPath,\n      pageURL: to.fullPath,\n      uuid: getUUID()\n    });\n\n    next();\n  });\n}\n","import { getPageURL } from '../utils/utils'\nimport { lazyReportCache } from '../utils/report'\nimport { getUUID } from './utils'\n\nexport default function pageChange() {\n    let from = ''\n    window.addEventListener('popstate', () => {\n        const to = getPageURL()\n\n        lazyReportCache({\n            from,\n            to,\n            type: 'behavior',\n            subType: 'popstate',\n            startTime: performance.now(),\n            uuid: getUUID(),\n        })\n\n        from = to\n    }, true)\n\n    let oldURL = ''\n    window.addEventListener('hashchange', event => {\n        const newURL = event.newURL\n\n        lazyReportCache({\n            from: oldURL,\n            to: newURL,\n            type: 'behavior',\n            subType: 'hashchange',\n            startTime: performance.now(),\n            uuid: getUUID(),\n        })\n\n        oldURL = newURL\n    }, true)\n}","import pv from './pv'\nimport pageAccessDuration from './pageAccessDuration'\nimport pageAccessHeight from './pageAccessHeight'\nimport onClick from './onClick'\nimport config from '../config'\nimport onVueRouter from './onVueRouter'\nimport pageChange from './pageChange'\n\nexport default function behavior() {\n    pv()\n    pageAccessDuration()\n    pageAccessHeight()\n    onClick()\n    pageChange()\n\n    if (config.vue?.router) {\n        onVueRouter(config.vue.router)\n    }\n}","import error from \"./error/index\";\nimport performance from \"./performance/index\";\nimport behavior from \"./behavior/index\";\nimport { setConfig } from \"./config\";\nimport { onBeforeunload, onHidden } from \"./utils/utils\";\nimport { report } from \"./utils/report\";\nimport { getCache, clearCache } from \"./utils/cache\";\nexport const monitor = {\n  init(options = {}) {\n    setConfig(options);\n    error();\n    performance();\n    behavior();\n\n    // 当页面进入后台或关闭前时，将所有的 cache 数据进行上报\n    [onBeforeunload, onHidden].forEach((fn) => {\n      fn(() => {\n        const data = getCache();\n        if (data.length) {\n          report(data, true);\n          clearCache();\n        }\n      });\n    });\n  }\n};\n// export default monitor;\n"],"names":["originalProto","XMLHttpRequest","prototype","originalOpen","open","originalSend","send","deepCopy","target","result","Array","isArray","key","onBFCacheRestore","callback","window","addEventListener","event","persisted","onBeforeunload","onHidden","once","onHiddenOrPageHide","type","document","visibilityState","removeEventListener","executeAfterLoad","readyState","onLoad","getPageURL","location","href","cache","getCache","addCache","data","push","clearCache","length","generateUniqueID","Date","now","Math","floor","random","config","url","appID","userID","systemInfo","navigator","userAgent","vue","Vue","router","setConfig","options","urlToJson","obj","index","indexOf","params","substring","parr","split","i","arr","handleXhr","targetArr","filter","item","method","forEach","subType","sendData","realArr","isSupportSendBeacon","sendBeacon","bind","reportWithXHR","sessionID","report","isImmediate","console","error","reportData","JSON","stringify","id","requestIdleCallback","timeout","setTimeout","timer","lazyReportCache","clearTimeout","xhr","call","oldConsoleError","args","apply","startTime","performance","errData","pageURL","e","src","timeStamp","html","outerHTML","resourceType","tagName","paths","path","map","Boolean","onerror","msg","line","column","stack","reason","name","message","errorHandler","err","vm","info","isSupportPerformanceObserver","PerformanceObserver","observeEntries","observeEvent","hasAlreadyCollected","entryType","entryHandler","list","getEntries","entry","observer","disconnect","nextHopProtocol","initiatorType","sourceType","duration","dns","domainLookupEnd","domainLookupStart","tcp","connectEnd","connectStart","redirect","redirectEnd","redirectStart","ttfb","responseStart","protocol","responseBodySize","encodedBodySize","responseHeaderSize","transferSize","resourceSize","decodedBodySize","isCache","observe","buffered","getEntriesByType","preventType","isSafari","test","includes","observePaint","json","toJSON","requestAnimationFrame","bfc","lcpDone","isLCPDone","observeLCP","element","observeCLS","sessionValue","sessionEntries","cls","value","hadRecentInput","firstSessionEntry","lastSessionEntry","formatCLSEntry","entries","takeRecords","sources","observeFID","nodeName","cancelable","fidPolyfill","eachEventType","onInput","isEpochTime","eventTypes","passive","capture","observerLoad","onEvent","toLocaleLowerCase","isOnLoaded","checkDOMChange","getRenderTime","observeFirstScreenPaint","MutationObserver","next","ignoreDOMList","mutationList","children","mutation","addedNodes","from","node","nodeType","isInclude","childList","subtree","isInScreen","needToCalculate","fetchStart","responseEnd","getComputedStyle","display","width","height","documentElement","parentElement","viewportWidth","innerWidth","viewportHeight","innerHeight","dom","rectInfo","getBoundingClientRect","left","top","overwriteOpenAndSend","newOpen","newSend","onLoadend","endTime","responseData","currentTarget","response","status","toUpperCase","success","originalFetch","fetch","overwriteFetch","newFetch","then","res","clone","body","ok","catch","frames","fps","frame","lastSecond","calculateFPS","round","onVueRouter","isFirst","beforeEach","to","needCalculateRenderTime","mixin","mounted","$nextTick","uuid","getUUID","localStorage","getItem","setItem","pv","referrer","pageAccessDuration","hasReport","pageHeight","scrollTop","pageAccessHeight","onScroll","toPercent","scrollHeight","val","toFixed","onClick","eventType","innerHTML","offsetWidth","offsetHeight","viewport","query","fullPath","pageChange","oldURL","newURL","behavior","monitor","init","fn"],"mappings":"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"}